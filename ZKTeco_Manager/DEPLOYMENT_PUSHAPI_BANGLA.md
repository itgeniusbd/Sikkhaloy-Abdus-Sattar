# ZKTeco.PushAPI ???????????? ???? (?????)

## ????????? ?????
??? ???? Web API ???????? ?? ZKTeco ?????? ???? ?????? Attendance ???? ????? ???? ?????

---

## ? ????? ???????????? (??? ??????)

### ?. PowerShell Administrator ?????? ?????
- Start Menu ? PowerShell ?????
- PowerShell ? ???? ????? ??? **"Run as Administrator"** ??????? ????

### ?. ZKTeco_Manager ???????? ???
```powershell
cd F:\SIKKHALOY-V3\ZKTeco_Manager
```

### ?. Deploy Script ?????
```powershell
.\Deploy-PushAPI.ps1
```

??? ????????????????:
- ? ???????? ????? ????
- ? IIS ?????? ???? (??? ?? ????)
- ? Website ???? ????
- ? Firewall ??????? ????
- ? ?????? ????? ????

### ?. ????? ????? ????
??? ??? ???, ???? ??????:
```
? Deployment completed successfully!
```

????????? ????? ????:
```
http://localhost:8080/api/iclock
```

---

## ?? ?????? ??????

### ???? ????? ??????? ????:
```powershell
.\Deploy-PushAPI.ps1 -Port 9090
```

### ???? ????? ???? (??????? ???? ??):
```powershell
.\Deploy-PushAPI.ps1 -TestOnly
```

### ????? ????? ???? (???? ???????):
```powershell
.\Deploy-PushAPI.ps1 -SkipBuild
```

---

## ?? ?????? ??????????

### ZKTeco ??????? Push URL ??? ????:

1. ???????? Admin ?????? ???
2. **Communication** ?????? ?????
3. **Push URL** ??? ????:
   ```
   http://[?????_???????_IP]:8080/api/iclock
   ```

??????:
- ????? ???????: `http://192.168.0.100:8080/api/iclock`
- Public IP: `http://103.123.456.789:8080/api/iclock`

4. Save ???? ??? ?????? ????????? ????

---

## ?? ???????????

### ??????: Build ?????? ?????
**??????:**
```powershell
# NuGet packages restore ????
nuget restore ZKTeco_Manager.sln

# ???? try ????
.\Deploy-PushAPI.ps1
```

### ??????: Port ???????? ??????? ?????
**??????:**
```powershell
# ???? port ??????? ????
.\Deploy-PushAPI.ps1 -Port 9090
```

### ??????: Website ???? ????? ??
**??????:**
```powershell
# IIS Manager ?????
inetmgr

# ZKTecoPushAPI site ??????
# ???? ????? ??? Start ????
```

### ??????: ?????? ???? ???? ???? ??
**??? ????:**
1. ? Server ? Firewall ????? ???? ??? ????
2. ? ?????? ???? Server ? ping ????? ????
3. ? Push URL ???????? ??? ??? ??? ????
4. ? Website ???? ??? ????

---

## ?? ?? ????? ?????

### IIS ?? ?????:
```powershell
# ??????? 50 ???? ?????
Get-Content C:\inetpub\logs\LogFiles\W3SVC*\*.log -Tail 50
```

### Website ????????? ?????:
```powershell
Get-Website -Name "ZKTecoPushAPI"
```

### Application Pool ????????? ?????:
```powershell
Get-WebAppPoolState -Name "ZKTecoPushAPI"
```

---

## ??? ?????????? ??????

### Website ????????? ????:
```powershell
Restart-Website -Name "ZKTecoPushAPI"
```

### Website ???? ????:
```powershell
Stop-Website -Name "ZKTecoPushAPI"
```

### Website ???? ????:
```powershell
Start-Website -Name "ZKTecoPushAPI"
```

---

## ?? Production ? Deploy

### Windows Server ? Deploy ????:

1. **Server Requirements:**
   - Windows Server 2012 R2 ?? ????
   - .NET Framework 4.7.2
   - IIS 7.5 ?? ????

2. **Deploy Script ?????:**
   ```powershell
   .\Deploy-PushAPI.ps1 -Port 8080
   ```

3. **Firewall Configure ????:**
   - Windows Firewall ? ????? ???? ????
   - Router ? Port Forwarding ??? ???? (??? ???????? ???)

4. **Domain/IP ????? Test ????:**
   ```
   http://your-domain.com:8080/api/iclock
   ```

---

## ?? ????????? ????

1. **HTTPS ??????? ????** Production ?
2. **IP Restriction** ???? ???? ?????? IP ????? ????
3. **Authentication** ??? ???? API endpoint ?
4. **Regular Update** ???? Windows ??? IIS

---

## ?? ??????? ?????????

??? ??? ?????? ???:
1. ?? ?????? ???? ?????
2. `DEPLOYMENT_PUSHAPI.md` ????? (????????? ?????? ????)
3. Development team ?? ???? ??????? ????

---

**???, ?????, ??? ???????????! ??**
