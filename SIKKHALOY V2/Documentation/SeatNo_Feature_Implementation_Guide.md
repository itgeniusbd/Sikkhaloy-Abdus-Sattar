# ??? ????? (Seat Number) ????? ?????????? ????

## ??????????
?? ?????? `StudentsClass` ?????? `SeatNo` ???? ???? ???? ???? ????? ??? ?????? ??? `Find_Student.aspx` ???? ??? ??????? ???? ??? ????? ?????? ? ???? ???? ?????? ????? ??? ???????

## ????????????

### 1. ??????? ????????
**????:** `SIKKHALOY V2\Database\AddSeatNoColumn.sql`

```sql
-- SeatNo column added to StudentsClass table
ALTER TABLE dbo.StudentsClass
ADD SeatNo NVARCHAR(50) NULL

-- Index created for better performance
CREATE NONCLUSTERED INDEX IX_StudentsClass_SeatNo
ON dbo.StudentsClass(SeatNo)
INCLUDE (StudentClassID, StudentID, ClassID)
```

**?? ????????? ??? ???? ???:**
1. SQL Server Management Studio ?????
2. Edu ??????? ??????? ????
3. ????? SQL script ??? ????

### 2. Find_Student.aspx ??? ?????

#### ???????? ?: GridView-?? SeatNo ???? ?????
**???????:** "Change Roll No." ??????? GridView

```aspx
<asp:TemplateField HeaderText="Seat No" SortExpression="SeatNo">
    <ItemTemplate>
        <span class=" d-none d-print-block"><%# Eval("SeatNo") %></span>
        <asp:TextBox ID="SeatTextBox" CssClass="form-control d-print-none" 
                     runat="server" Text='<%# Bind("SeatNo") %>'></asp:TextBox>
    </ItemTemplate>
</asp:TemplateField>
```

#### ???????? ?: Image Repeater-? SeatNo ????????
**???????:** "Upload Image" ??????? Repeater

```aspx
<p class="badge mdb-color lighten-1">ID: <%#Eval("ID") %></p>
<p class="badge mdb-color lighten-1 mb-2">Roll No: <%#Eval("RollNo") %></p>
<p class="badge mdb-color lighten-1 mb-2">Seat No: <%#Eval("SeatNo") %></p>
```

#### ???????? ?: SQL DataSource ?????
**ShowStudentClassSQL:**
```sql
SELECT Student.StudentID, Student.SMSPhoneNo, Student.StudentsName, 
       StudentsClass.RollNo, StudentsClass.SeatNo, Student.ID, ...
FROM StudentsClass INNER JOIN Student ...

-- Update Command
UPDATE StudentsClass 
SET RollNo = @RollNo, SeatNo = @SeatNo 
WHERE (SchoolID = @SchoolID) AND (StudentClassID = @StudentClassID) 
  AND (EducationYearID = @EducationYearID)
```

**ShowIDSQL:**
```sql
SELECT Student.ID, Student.StudentsName, StudentsClass.RollNo, 
       StudentsClass.SeatNo, ...
FROM StudentsClass INNER JOIN Student ...
WHERE (Student.ID = @ID) ...
```

### 3. Find_Student.aspx.cs Code-Behind ?????

```csharp
protected void UpdateRollButton_Click(object sender, EventArgs e)
{
    foreach (GridViewRow rows in RollNoGridView.Rows)
    {
        TextBox RollTextBox = (TextBox)rows.FindControl("RollTextBox");
        TextBox SeatTextBox = (TextBox)rows.FindControl("SeatTextBox");
        
        if (RollTextBox.Text.Trim() != "" || SeatTextBox.Text.Trim() != "")
        {
            ShowStudentClassSQL.UpdateParameters["StudentClassID"].DefaultValue = 
                RollNoGridView.DataKeys[rows.DataItemIndex]["StudentClassID"].ToString();
            ShowStudentClassSQL.UpdateParameters["RollNo"].DefaultValue = RollTextBox.Text;
            ShowStudentClassSQL.UpdateParameters["SeatNo"].DefaultValue = SeatTextBox.Text;
            ShowStudentClassSQL.Update();
        }
    }
    
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), 
        "alertMessage", "alert('Updated Successfully!!')", true);
}
```

## ??????? ?????????

### ??? ????? ???????/????? ???? ??????

1. **Admission > Edit Student Info > Find Student** ?????? ???
2. ?????, ?????, ?????, ???? ??????? ???? ???? Student ID ????? ????? ????
3. ????? ????? ????? ?????:
   
   **Upload Image ?????:**
   - ??????? ??????? ????? Roll No ??? Seat No ??????
   
   **Change Roll No. ?????:**
   - GridView-?? Roll ??? Seat No ????? ???? ???????? ?????
   - ??????? TextBox-? Roll ? Seat Number ???? ??? ????
   - "Update" ????? ????? ??? ??? ????

### ???????????? ?????????

1. **Roll No ??? Seat No ????????? ????????:**
   - Roll Number ???? ?????? ??????? ??????? ?????
   - Seat Number ???????? ???? ????? ????? ??? ????

2. **Nullable Field:**
   - Seat Number optional, ???? ???? ????
   - Roll Number ??????????? ?? ???? ???? ????

3. **??? ?????:**
   - ?????? ?????? ??????? Roll ? Seat Number ????? ??? ????
   - Update button ????? ????? ????? ?? ????? ???? ????

## ????????? ???????

??? ???????? ????? Seat Number ?????? ???:

### 1. Student List ???? ????? ????:
```aspx
<asp:BoundField DataField="SeatNo" HeaderText="Seat No" 
                SortExpression="SeatNo" />
```

### 2. ID Card/Admit Card-? ????? ????:
```aspx
<li>Seat No: <%# Eval("SeatNo") %></li>
```

### 3. Report Pages-? ????? ????:
SQL Query-?? `StudentsClass.SeatNo` ????? ????:
```sql
SELECT ..., StudentsClass.RollNo, StudentsClass.SeatNo, ...
FROM StudentsClass ...
```

## ?????? ??????

### ?????? ?: Column not found error
**??????:** AddSeatNoColumn.sql ????????? ??? ????

### ?????? ?: SeatNo ???????? ??
**??????:** 
1. SELECT query-?? SeatNo ??? ???? ??? ????
2. Browser cache clear ???? (Ctrl+F5)

### ?????? ?: Update ????? ??
**??????:**
1. UPDATE command-? SeatNo parameter ??? ???? ??? ????
2. TextBox ID ???? ??? ???? ????? (SeatTextBox)

## ?????????? ?????

### ???? ????: 
- **NVARCHAR(50)** - Unicode support ?? 50 character ???????
- Roll Number-?? ??? ??? ????

### Performance:
- Index ???? ??? ?????? ????? ??????? ????
- Nullable column, ??? ????? ?????? ???? ?????? ??? ??

### Backward Compatibility:
- ????? ?????? SeatNo NULL ?????
- ???? existing functionality ????? ??

## ???????

??? ???? ?????? ??? ?? ??? ????? ????? ???, ?????:
1. Database backup ???
2. Test environment-? ?????? ?????? ????
3. Production-? implement ???? ??? ???????? test ????

---

**??????? ?????:** 2024
**Version:** 1.0
**Status:** ? Implemented & Tested
