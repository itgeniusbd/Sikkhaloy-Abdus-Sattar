<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>MGC & Sikkhaloy</title>
    <script src="https://cdn.tailwindcss.com?v=3.4.1"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
   /* CSS Version: 2.1 - Cache Busting with Pull-to-Refresh */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

     * {
  margin: 0;
       padding: 0;
 box-sizing: border-box;
        }

  html, body {
            height: 100%;
          overflow: hidden;
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
         --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --danger-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
     }

        /* Animated Background */
  .animated-bg {
     position: fixed;
            width: 100%;
     height: 100%;
  z-index: -1;
   background: linear-gradient(135deg, #047857 0%, #059669 50%, #10b981 100%);
  background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
  }

  @keyframes gradientShift {
            0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
       100% { background-position: 0% 50%; }
  }

        /* Floating Particles */
        .particle {
            position: fixed;
      width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.5);
         border-radius: 50%;
            animation: float 20s infinite;
 z-index: -1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
   90% { opacity: 1; }
          100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
        }

        /* Glassmorphism Cards */
        .glass-card {
    background: rgba(255, 255, 255, 0.15);
       backdrop-filter: blur(20px);
       -webkit-backdrop-filter: blur(20px);
 border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
}

        /* Ensure pages are scrollable */
  .page {
   display: none;
      height: 100%;
    width: 100%;
opacity: 0;
        transform: scale(0.95);
   transition: opacity 0.5s ease, transform 0.5s ease;
   overflow-y: auto; /* Allow scrolling */
      -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
     }

     .page.active {
 display: flex;
 opacity: 1;
      transform: scale(1);
      }

  /* Logo container fixes */
        .min-h-\[80px\] {
  min-height: 80px !important;
        }

   .min-h-\[96px\] {
      min-height: 96px !important;
   }

        .min-h-\[160px\] {
      min-height: 160px !important;
}

        .min-h-\[64px\] {
 min-height: 64px !important;
        }

     .min-h-\[128px\] {
    min-height: 128px !important;
        }

   /* Ensure fallback icons are visible */
      #mgc-fallback,
   #sikkhaloy-fallback {
   flex-shrink: 0;
        }

        /* Loading Animation */
    .loader {
            position: fixed;
     top: 0;
       left: 0;
      width: 100%;
            height: 100%;
     background: linear-gradient(135deg, #047857 0%, #059669 100%);
            display: flex;
       align-items: center;
      justify-content: center;
       z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loader.hidden {
        opacity: 0;
            pointer-events: none;
   }

     .spinner {
 width: 60px;
   height: 60px;
   border: 4px solid rgba(255, 255, 255, 0.3);
    border-top: 4px solid white;
    border-radius: 50%;
  animation: spin 1s linear infinite;
        }

        @keyframes spin {
0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
        }

        /* Button Hover Effects */
        .btn-primary {
            position: relative;
         overflow: hidden;
        transition: all 0.3s ease;
 }

        .btn-primary::before {
    content: '';
            position: absolute;
      top: 50%;
    left: 50%;
    width: 0;
            height: 0;
         border-radius: 50%;
          background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn-primary:hover::before {
         width: 300px;
            height: 300px;
 }

     .btn-primary:hover {
            transform: translateY(-3px);
box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* Icon Animations */
      .icon-float {
      animation: iconFloat 3s ease-in-out infinite;
        }

        @keyframes iconFloat {
      0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
     }

     /* Logo Styles */
        img {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
 }

      img:hover {
            transform: scale(1.05);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* Card Hover Effect */
        .info-card {
            transition: all 0.3s ease;
        }

    .info-card:hover {
     transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    }

        /* Navigation Bar */
        .nav-bar {
            background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
 padding-bottom: env(safe-area-inset-bottom, 20px);
            border-top: 2px solid rgba(255, 255, 255, 0.3);
      position: sticky;
   bottom: 0;
      z-index: 100;
    }

 /* Safe area for mobile devices */
        .safe-bottom {
 margin-bottom: env(safe-area-inset-bottom, 0px);
 }

        .pb-safe {
       padding-bottom: max(12px, env(safe-area-inset-bottom));
        }

     /* Mobile viewport fixes */
        @media (max-width: 768px) {
         .nav-bar {
         padding: 8px 4px;
 padding-bottom: max(20px, env(safe-area-inset-bottom));
        }
       
      .content-area {
  padding-bottom: 100px;
         padding-top: 10px;
          }
   
  .glass-card {
       padding: 0.5rem !important;
  margin: 0.1rem;
      }

   .page {
     padding: 0.5rem !important;
       }

    img {
     max-width: 100%;
     height: auto;
  }

      h1, h2, h3 {
    word-wrap: break-word;
overflow-wrap: break-word;
       }
      }

  /* Extra small mobile devices */
        @media (max-width: 375px) {
 .glass-card {
  padding: 0.5rem !important;
   }

    h1 {
  font-size: 1rem !important;
   line-height: 1.4 !important;
}

 p {
        font-size: 0.875rem !important;
      }

    .badge {
   font-size: 0.7rem !important;
     padding: 0.25rem 0.75rem !important;
    }

 img {
    max-width: 90%;
  }
   }

  /* Large mobile devices */
 @media (min-width: 376px) and (max-width: 640px) {
   h1 {
     font-size: 1.125rem !important;
    }
        }

  /* Ensure images load properly */
        img {
 image-rendering: -webkit-optimize-contrast;
 image-rendering: crisp-edges;
        }

 /* Logo specific fixes */
        img[alt*="Logo"] {
      display: block;
         margin-left: auto;
            margin-right: auto;
    }

        /* Dark Mode Toggle */
        .dark-mode .animated-bg {
         background: linear-gradient(135deg, #064e3b 0%, #065f46 50%, #047857 100%);
        }

        .dark-mode .glass-card {
            background: rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .dark-mode .nav-bar {
     background: rgba(0, 0, 0, 0.8);
            border-color: rgba(255, 255, 255, 0.1);
        }

        /* Pull to Refresh Styles */
   .pull-to-refresh {
position: fixed;
 top: 0;
     left: 0;
          width: 100%;
     height: 80px;
       display: flex;
     align-items: center;
         justify-content: center;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.95) 0%, rgba(5, 150, 105, 0.95) 100%);
        transform: translateY(-100%);
            transition: transform 0.3s ease;
       z-index: 10000;
     backdrop-filter: blur(10px);
   -webkit-backdrop-filter: blur(10px);
  }

  .pull-to-refresh.pulling {
            transform: translateY(0);
   }

      .pull-to-refresh.refreshing {
            transform: translateY(0);
        }

        .refresh-spinner {
     width: 40px;
            height: 40px;
 border: 3px solid rgba(255, 255, 255, 0.3);
   border-top: 3px solid white;
       border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .refresh-icon {
            font-size: 28px;
          color: white;
        transition: transform 0.3s ease;
        }

        .refresh-icon.rotate {
      transform: rotate(180deg);
        }

        .refresh-text {
        color: white;
        font-weight: 600;
    margin-left: 12px;
        font-size: 16px;
  }

        /* Badge Animation */
        .badge {
            animation: pulse 2s ease-in-out infinite;
      }

    @keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loader" class="loader">
        <div class="text-center">
          <div class="spinner mx-auto mb-4"></div>
        <p class="text-white text-xl font-semibold">লোড হচ্ছে...</p>
        </div>
    </div>

    <!-- Pull to Refresh Indicator -->
    <div id="pullToRefresh" class="pull-to-refresh">
        <i id="refreshIcon" class="fas fa-arrow-down refresh-icon"></i>
   <span id="refreshText" class="refresh-text">টেনে রিফ্রেশ করুন</span>
    </div>

    <!-- Animated Background -->
    <div class="animated-bg"></div>

    <!-- Floating Particles -->
    <div id="particles"></div>

    <div id="app">
        <!-- Content Area -->
      <div class="content-area">
            <!-- Home Page -->
       <div id="home" class="page active flex-col items-center justify-center p-2 md:p-6 overflow-y-auto">
    <div class="max-w-2xl w-full px-2">
    <div class="glass-card p-4 md:p-12 rounded-3xl shadow-2xl">
          <div class="text-center mb-6">
   <!-- MGC Logo with Fallback -->
 <div class="mb-4 flex justify-center items-center min-h-[80px] sm:min-h-[96px] md:min-h-[160px]">
     <!-- Try to load image first -->
<img src="logo/mgc-logo.jpg" 
           alt="MGC Logo" 
         class="w-20 h-20 sm:w-24 sm:h-24 md:w-40 md:h-40 rounded-full shadow-2xl object-cover border-4 border-white icon-float"
  style="display: block;"
         onload="console.log('MGC Logo loaded successfully')"
 onerror="console.warn('MGC Logo not found, showing fallback'); this.style.display='none'; document.getElementById('mgc-fallback').style.display='flex';">
            
       <!-- Fallback Icon if image fails -->
  <div id="mgc-fallback" 
    class="w-20 h-20 sm:w-24 sm:h-24 md:w-40 md:h-40 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-2xl border-4 border-white icon-float" 
         style="display: none;">
     <i class="fas fa-building text-white text-2xl sm:text-3xl md:text-5xl"></i>
  </div>
  </div>
  
        <!-- Rest of header -->
  <h1 class="text-lg sm:text-xl md:text-4xl font-bold mb-2 md:mb-4 text-white drop-shadow-lg leading-tight">
   মেলান্দহ সরকারি কলেজ
    </h1>
      <p class="text-sm sm:text-base md:text-xl text-white mb-4 md:mb-6 opacity-90">কলেজ ম্যানেজমেন্ট অ্যাপ</p>
      <div class="inline-block px-3 py-1.5 md:px-4 md:py-2 bg-white bg-opacity-20 rounded-full text-white text-xs md:text-sm badge">
          <i class="fas fa-check-circle mr-1 md:mr-2"></i>মেলান্দহ, জামালপুর
      </div>
   </div>

 <a href="https://www.mgc.gov.bd" target="_blank" rel="noopener noreferrer" 
        class="btn-primary block w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 px-6 rounded-2xl font-bold text-lg text-center shadow-2xl mb-6 relative">
            <i class="fas fa-external-link-alt mr-2"></i>ওয়েবসাইট দেখুন
     </a>



               <div class="glass-card p-6 rounded-2xl">
      <h3 class="font-bold text-white mb-4 text-lg flex items-center">
    <i class="fas fa-info-circle mr-2"></i>দ্রুত তথ্য:
       </h3>
      <ul class="space-y-3">
          <li class="flex items-start gap-3 text-white">
              <i class="fas fa-check-circle text-green-300 mt-1"></i>
              <a href="https://www.mgc.gov.bd/home/page/at_a_glance">কলেজ সম্পর্কে</a>
          </li>
          <li class="flex items-start gap-3 text-white">
              <i class="fas fa-check-circle text-green-300 mt-1"></i>
              <a href="https://www.mgc.gov.bd/home/page/academic_facilites">একাডেমিক সুবিধা</a>
          </li>
          <li class="flex items-start gap-3 text-white">
              <i class="fas fa-check-circle text-green-300 mt-1"></i>
              <a href="https://www.mgc.gov.bd/home/allNotice">আপডেট সংবাদ</a>
          </li>
          <li class="flex items-start gap-3 text-white">
              <i class="fas fa-check-circle text-green-300 mt-1"></i>
              <a href="https://www.mgc.gov.bd/home/page/admission_rules">ভর্তি বিধি</a>
          </li>
          <li class="flex items-start gap-3 text-white">
              <i class="fas fa-check-circle text-green-300 mt-1"></i>
              <a href="https://www.mgc.gov.bd/home/search_admitted_student">শিক্ষার্থী তথ্য</a>
          </li>
      </ul>
      </div>
     </div>
 </div>
            </div>

            <!-- Login Page -->
            <div id="login" class="page flex-col items-center justify-center p-2 md:p-6 overflow-y-auto">
    <div class="max-w-2xl w-full px-2">
   <div class="glass-card p-4 md:p-12 rounded-3xl shadow-2xl">
 <div class="text-center mb-6">
       <!-- Sikkhaloy Logo - Horizontal with Fallback -->
   <div class="mb-4 flex justify-center items-center min-h-[64px] sm:min-h-[80px] md:min-h-[128px]">
   <!-- Try to load image first -->
        <img src="logo/sikkhaloy-logo.png" 
  alt="Sikkhaloy Logo" 
           class="h-16 sm:h-20 md:h-32 w-auto max-w-full mx-auto shadow-2xl object-contain"
     style="display: block;"
     onload="console.log('Sikkhaloy Logo loaded successfully')"
  onerror="console.warn('Sikkhaloy Logo not found, showing fallback'); this.style.display='none'; document.getElementById('sikkhaloy-fallback').style.display='block';">
  
     <!-- Fallback Text if image fails -->
  <div id="sikkhaloy-fallback" 
              class="px-6 py-3 bg-white rounded-2xl shadow-2xl" 
style="display: none;">
    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
        শিক্ষালয়
     </h2>
       </div>
   </div>
   
  <!-- Rest of header -->
    <p class="text-sm sm:text-base md:text-xl text-white mb-4 md:mb-8 opacity-90">শিক্ষালয় অনলাইন প্ল্যাটফর্ম</p>
       <div class="inline-block px-3 py-1.5 md:px-4 md:py-2 bg-white bg-opacity-20 rounded-full text-white text-xs md:text-sm badge">
     <i class="fas fa-shield-alt mr-1 md:mr-2"></i>নিরাপদ লগইন
     </div>
        </div>

      <a href="https://sikkhaloy.com/login.aspx" target="_blank" rel="noopener noreferrer" 
     class="btn-primary block w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-5 px-6 rounded-2xl font-bold text-lg text-center shadow-2xl mb-6 relative">
             <i class="fas fa-sign-in-alt mr-2"></i>লগইন করুন
         </a>

          <div class="glass-card p-6 rounded-2xl">
              <h3 class="font-bold text-white mb-4 text-lg flex items-center">
     <i class="fas fa-list-check mr-2"></i>সেবা সমূহ:
 </h3>
              <ul class="space-y-3">
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-user-check text-blue-300 mt-1"></i>
                      <span>শিক্ষক ও শিক্ষার্থী লগইন</span>
                  </li>
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-calendar-alt text-blue-300 mt-1"></i>
                      <span>ক্লাশ রুটিন ও হাজিরা</span>
                  </li>
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-file-alt text-blue-300 mt-1"></i>
                      <span>পরীক্ষা ও ফলাফল</span>
                  </li>
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-chart-line text-blue-300 mt-1"></i>
                      <span>একাউন্ট ও রিপোর্টিং</span>
                  </li>
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-bell text-blue-300 mt-1"></i>
                      <span>অনলাইন নোটিশ/ অ্যাসাইনমেন্ট</span>
                  </li>
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-file-alt text-blue-300 mt-1"></i>
                      <span>মোবাইল SMS নোটিফিকেশন</span>
                  </li>
                  <li class="flex items-start gap-3 text-white">
                      <i class="fas fa-calendar-alt text-blue-300 mt-1"></i>
                      <span>ডিজিটাল হাজিরা</span>
                  </li>
              </ul>
 </div>
          </div>
     </div>
      </div>

       <!-- Contact Page -->
      <div id="contact" class="page flex-col items-center justify-center p-4 md:p-6">
           <div class="max-w-2xl w-full">
         <div class="glass-card p-6 md:p-8 rounded-3xl shadow-2xl">
   <div class="text-center mb-8">
  <div class="w-24 h-24 bg-gradient-to-br from-pink-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl icon-float">
          <i class="fas fa-address-book text-white text-4xl"></i>
    </div>
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg">যোগাযোগ করুন</h2>
   
               </div>

             <div class="space-y-4">
     <!-- Address -->
       <div class="info-card glass-card p-5 rounded-2xl">
      <div class="flex items-start gap-4">
      <div class="w-14 h-14 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg">
              <i class="fas fa-map-marker-alt text-white text-2xl"></i>
      </div>
        <div>
          <h3 class="font-bold text-lg text-white mb-2">আমাদের ঠিকানা</h3>
            <p class="text-white opacity-90">মেলান্দহ সরকারি কলেজ<br />মেলান্দহ, জামালপুর</p>
    </div>
  </div>
   </div>

    <!-- Email -->
      <div class="info-card glass-card p-5 rounded-2xl">
     <div class="flex items-start gap-4">
   <div class="w-14 h-14 bg-gradient-to-br from-pink-400 to-red-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg">
            <i class="fas fa-envelope text-white text-2xl"></i>
     </div>
           <div>
      <h3 class="font-bold text-lg text-white mb-2">ইমেইল করুন</h3>
      <a href="mailto:contact@mgc.gov.bd" class="text-pink-200 hover:text-white block mb-1 hover:underline transition">
    <i class="fas fa-paper-plane mr-1"></i>contact@mgc.gov.bd
    </a>
     <a href="mailto:govt.melandahcollege@gmail.com" class="text-pink-200 hover:text-white block hover:underline transition">
       <i class="fas fa-paper-plane mr-1"></i>govt.melandahcollege@gmail.com
            </a>
 </div>
         </div>
          </div>

       <!-- Phone -->
  <div class="info-card glass-card p-5 rounded-2xl">
   <div class="flex items-start gap-4">
      <div class="w-14 h-14 bg-gradient-to-br from-green-400 to-emerald-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg">
       <i class="fas fa-phone-alt text-white text-2xl"></i>
   </div>
         <div>
              <h3 class="font-bold text-lg text-white mb-2">কল করুন</h3>
      <a href="tel:01309110150" class="text-green-200 hover:text-white block mb-2 hover:underline text-xl font-semibold transition">
    <i class="fas fa-phone mr-2"></i>01309 110150
             </a>
  <a href="tel:01559889034" class="text-green-200 hover:text-white block hover:underline text-xl font-semibold transition">
               <i class="fas fa-phone mr-2"></i>01559 889034
                   </a>
     </div>
                </div>
   </div>


     </div>
 </div>
      </div>
          </div>
   </div>

        <!-- Bottom Navigation -->
     <nav class="nav-bar shadow-2xl border-t border-purple-200 safe-bottom" style="flex-shrink: 0;">
           <div class="flex justify-around items-center py-3 px-2 pb-safe">
      <button onclick="showPage('home')" id="nav-home" class="nav-btn flex flex-col items-center gap-1 px-3 md:px-6 py-2 rounded-xl transition-all duration-300 bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg transform scale-105">
         <i class="fas fa-home text-lg md:text-xl"></i>
    <span class="text-xs font-semibold">হোম</span>
      </button>

       <button onclick="showPage('login')" id="nav-login" class="nav-btn flex flex-col items-center gap-1 px-3 md:px-6 py-2 rounded-xl transition-all duration-300 text-gray-600 hover:bg-gray-100">
    <i class="fas fa-sign-in-alt text-lg md:text-xl"></i>
  <span class="text-xs font-semibold">লগইন</span>
 </button>

             <button onclick="showPage('contact')" id="nav-contact" class="nav-btn flex flex-col items-center gap-1 px-3 md:px-6 py-2 rounded-xl transition-all duration-300 text-gray-600 hover:bg-gray-100">
   <i class="fas fa-address-book text-lg md:text-xl"></i>
      <span class="text-xs font-semibold">যোগাযোগ</span>
  </button>

        <button onclick="toggleDarkMode()" class="nav-btn flex flex-col items-center gap-1 px-3 md:px-6 py-2 rounded-xl transition-all duration-300 text-gray-600 hover:bg-gray-100">
    <i class="fas fa-moon text-lg md:text-xl" id="theme-icon"></i>
            <span class="text-xs font-semibold">থিম</span>
       </button>
  </div>
  </nav>
    </div>

    <script>
        // CSS Version tracking for cache busting
        const CSS_VERSION = '2.1';
        console.log('App CSS Version:', CSS_VERSION);

        // Pull to Refresh Implementation
        let pullToRefreshElement = document.getElementById('pullToRefresh');
   let refreshIcon = document.getElementById('refreshIcon');
      let refreshText = document.getElementById('refreshText');
        let startY = 0;
        let currentY = 0;
     let pulling = false;
        let refreshing = false;
      const pullThreshold = 80;

function handleTouchStart(e) {
 if (refreshing) return;
        
         // Only trigger when scrolled to top
        const scrollableElement = document.querySelector('.page.active');
     if (scrollableElement && scrollableElement.scrollTop === 0) {
             startY = e.touches[0].pageY;
                pulling = false;
         }
        }

        function handleTouchMove(e) {
 if (refreshing) return;

  const scrollableElement = document.querySelector('.page.active');
   if (scrollableElement && scrollableElement.scrollTop === 0) {
             currentY = e.touches[0].pageY;
         const pullDistance = currentY - startY;

         if (pullDistance > 0 && startY > 0) {
   pulling = true;
         
      if (pullDistance >= pullThreshold) {
      pullToRefreshElement.classList.add('pulling');
    refreshIcon.classList.add('rotate');
       refreshText.textContent = 'ছেড়ে দিয়ে রিফ্রেশ করুন';
        } else {
       pullToRefreshElement.style.transform = `translateY(-${100 - (pullDistance / pullThreshold * 100)}%)`;
      refreshIcon.classList.remove('rotate');
            refreshText.textContent = 'টেনে রিফ্রেশ করুন';
       }
      }
  }
        }

    function handleTouchEnd(e) {
            if (refreshing || !pulling) return;

 const pullDistance = currentY - startY;

         if (pullDistance >= pullThreshold) {
      // Trigger refresh
      refreshing = true;
pullToRefreshElement.classList.add('refreshing');
        refreshIcon.className = 'refresh-spinner';
        refreshText.textContent = 'রিফ্রেশ হচ্ছে...';

   // Simulate refresh (reload page after animation)
        setTimeout(() => {
        window.location.reload();
        }, 800);
            } else {
                // Reset
           pullToRefreshElement.style.transform = '';
             pullToRefreshElement.classList.remove('pulling');
   refreshIcon.classList.remove('rotate');
refreshText.textContent = 'টেনে রিফ্রেশ করুন';
            }

 pulling = false;
   startY = 0;
     currentY = 0;
        }

        // Create floating particles
      function createParticles() {
  const particlesContainer = document.getElementById('particles');
 for (let i = 0; i < 30; i++) {
       const particle = document.createElement('div');
particle.className = 'particle';
       particle.style.left = Math.random() * 100 + '%';
     particle.style.animationDelay = Math.random() * 20 + 's';
    particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
       particlesContainer.appendChild(particle);
      }
      }

      // Check if images loaded
      function checkImageLoad() {
            const images = document.querySelectorAll('img[alt*="Logo"]');
 images.forEach(img => {
  if (!img.complete || img.naturalHeight === 0) {
    console.warn('Logo failed to load:', img.src);
        img.onerror();
        }
            });
        }

        // Show page function
        function showPage(pageId) {
        console.log('Switching to page:', pageId);

            // Hide all pages
            const pages = document.querySelectorAll('.page');
         pages.forEach(page => {
         page.classList.remove('active');
      });

            // Show selected page with animation
     setTimeout(() => {
   const selectedPage = document.getElementById(pageId);
  if (selectedPage) {
          selectedPage.classList.add('active');
        }
  }, 50);

       // Update navigation buttons
   const navButtons = document.querySelectorAll('.nav-btn');
 navButtons.forEach(btn => {
       btn.className = 'nav-btn flex flex-col items-center gap-1 px-4 md:px-6 py-2 rounded-xl transition-all duration-300 text-gray-600 hover:bg-gray-100';
   btn.style.transform = 'scale(1)';
            });

   // Highlight active button
            const activeBtn = document.getElementById('nav-' + pageId);
     if (activeBtn) {
  if (pageId === 'home') {
   activeBtn.className = 'nav-btn flex flex-col items-center gap-1 px-4 md:px-6 py-2 rounded-xl transition-all duration-300 bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg';
        } else if (pageId === 'login') {
       activeBtn.className = 'nav-btn flex flex-col items-center gap-1 px-4 md:px-6 py-2 rounded-xl transition-all duration-300 bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg';
 } else if (pageId === 'contact') {
  activeBtn.className = 'nav-btn flex flex-col items-center gap-1 px-4 md:px-6 py-2 rounded-xl transition-all duration-300 bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-lg';
      }
             activeBtn.style.transform = 'scale(1.05)';
       }
     }

        // Dark mode toggle
     function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
    const icon = document.getElementById('theme-icon');
            if (document.body.classList.contains('dark-mode')) {
       icon.className = 'fas fa-sun text-xl';
      localStorage.setItem('darkMode', 'enabled');
            } else {
             icon.className = 'fas fa-moon text-xl';
     localStorage.setItem('darkMode', 'disabled');
            }
    }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded - CSS Version:', CSS_VERSION);
            console.log('Pull-to-Refresh enabled');

     // Hide loader
setTimeout(() => {
    document.getElementById('loader').classList.add('hidden');
            }, 1500);

   // Create particles
     createParticles();

         // Check dark mode preference
       if (localStorage.getItem('darkMode') === 'enabled') {
       document.body.classList.add('dark-mode');
                document.getElementById('theme-icon').className = 'fas fa-sun text-xl';
    }

 // Show home page
            showPage('home');

            // Check image loading
       setTimeout(checkImageLoad, 2000);

            // Force check all logos after DOM is fully loaded
          setTimeout(function() {
    const mgcLogo = document.querySelector('img[alt="MGC Logo"]');
           if (mgcLogo && (!mgcLogo.complete || mgcLogo.naturalHeight === 0)) {
   console.warn('MGC Logo failed to load, triggering error handler');
       mgcLogo.onerror();
              }

   const sikkhaloyLogo = document.querySelector('img[alt="Sikkhaloy Logo"]');
      if (sikkhaloyLogo && (!sikkhaloyLogo.complete || sikkhaloyLogo.naturalHeight === 0)) {
    console.warn('Sikkhaloy Logo failed to load, triggering error handler');
           sikkhaloyLogo.onerror();
            }
   }, 3000);

            // Force refresh on mobile
            if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
     window.location.reload(true);
     }

         // Add touch event listeners for pull-to-refresh
 document.addEventListener('touchstart', handleTouchStart, { passive: true });
       document.addEventListener('touchmove', handleTouchMove, { passive: true });
            document.addEventListener('touchend', handleTouchEnd, { passive: true });
        });

        // Prevent zoom on double tap (mobile)
   let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
         const now = (new Date()).getTime();
          if (now - lastTouchEnd <= 300) {
       event.preventDefault();
       }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>